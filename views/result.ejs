<!DOCTYPE html>
<html>
<head>
  <title>üîç Code Analysis Result</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f8;
      padding: 40px;
      color: #333;
    }

    .result-container {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      max-width: 1000px;
      margin: auto;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    h1, h2, h3 {
      color: #1a1a1a;
      border-bottom: 2px solid #e0e0e0;
      padding-bottom: 5px;
      margin-top: 30px;
    }

    strong, b {
      font-weight: bold;
    }

    em, i {
      font-style: italic;
    }

    p {
      line-height: 1.6;
      margin: 12px 0;
    }

    ul, ol {
      padding-left: 25px;
      margin-bottom: 20px;
    }

    code {
      background: #f5f5f5;
      padding: 3px 6px;
      border-radius: 4px;
      font-family: monospace;
    }

    pre {
      background: #1e1e1e;
      color: #dcdcdc;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      white-space: pre-wrap;
      font-size: 15px;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin: 20px 0;
    }

    table, th, td {
      border: 1px solid #ccc;
    }

    th, td {
      padding: 10px;
      text-align: left;
    }

    a {
      display: inline-block;
      margin-top: 25px;
      text-decoration: none;
      color: #007BFF;
      font-weight: bold;
    }

    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="result-container" id="output">
    <%= output %>
    <a href="/">üîô Go Back</a>
  </div>

  <script>
    function formatMarkdown(text) {
      return text
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')  // Bold
        .replace(/\*(.*?)\*/g, '<em>$1</em>')            // Italic
        .replace(/`([^`]+)`/g, '<code>$1</code>')         // Inline code
        .replace(/^### (.*$)/gim, '<h3>$1</h3>')          // H3
        .replace(/^## (.*$)/gim, '<h2>$1</h2>')           // H2
        .replace(/^# (.*$)/gim, '<h1>$1</h1>')            // H1
        .replace(/^\* (.*$)/gim, '<ul><li>$1</li></ul>')   // Bullet points (only single * for now)
        .replace(/\n/g, '<br>');                          // Line breaks
    }

    const container = document.getElementById('output');
    container.innerHTML = formatMarkdown(container.innerHTML);
  </script>
</body>
</html>
